<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>로그인</title>

    <link
      rel="preload"
      as="style"
      href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css"
    />
    <link
      rel="preload"
      as="style"
      href="//cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    />
    <link rel="preload" as="style" href="../css/style.css" />

    <!-- 스타일링 -->
    <link rel="stylesheet" href="../css/style.css" />
    <script>
      function gomain() {
        // 페이지 이동
        window.location.href = "../html/lbm.html";
      }
    </script>

    <script src="../cookie.js"></script>

    <script>
      function checkLogin() {
        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;

        const storedEmail = getCookie("userEmail");
        const storedPassword = getCookie("userPassword");

        if (email === storedEmail && password === storedPassword) {
          alert("로그인 성공!");
          setCookie("isLoggedIn", "true", 1); // 로그인 상태를 쿠키로 설정, 유효기간 1일
          updateHeader();
          window.location.href = "../html/lbm.html";
        } else {
          alert("아이디 또는 비밀번호가 일치하지 않습니다.");
        }
      }

      function updateHeader() {
        const headerList = document.querySelector(".header__list");
        if (getCookie("isLoggedIn") === "true") {
          headerList.innerHTML = `
            <li><a href="../html/my_page.html">마이페이지</a></li>
            <li><a href="#" onclick="logout()">로그아웃</a></li>
          `;
        }
      }

      function logout() {
        setCookie("isLoggedIn", "", -1); // 쿠키 삭제를 통한 로그아웃
        alert("로그아웃 되었습니다.");
        updateHeader();
        window.location.href = "../html/login.html";
      }

      // 쿠키 설정 함수
      function setCookie(name, value, days) {
        const expires = new Date();
        expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
        document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
      }

      // 쿠키 가져오기 함수
      function getCookie(name) {
        const cookieName = `${name}=`;
        const cookies = document.cookie.split(";");
        for (let i = 0; i < cookies.length; i++) {
          let cookie = cookies[i].trim();
          if (cookie.indexOf(cookieName) === 0) {
            return cookie.substring(cookieName.length, cookie.length);
          }
        }
        return "";
      }

      document.addEventListener("DOMContentLoaded", () => {
        updateHeader();
      });
    </script>
  </head>
  <body>
    <!-- skip-nav -->
    <div class="skip-nav">
      <a href="#Navigation">메뉴 바로가기</a>
      <a href="#SignIn">로그인 바로가기</a>
    </div>
    <div class="header-container">
      <!-- header -->
      <header class="header">
        <div class="header__top-menu flex-default">
          <h1 class="header__headline">
            <a href="./lbm.html">
              <img src="../images/doglogo.png" />
            </a>
            <span class="a11y-hidden">런던 베이글 뮤지엄</span>
          </h1>
          <ul class="header__list">
            <li>
              <a href="../html/sign-in.html">Sign In</a>
            </li>
            <li>
              <a href="../html/signup.html">Sign Up</a>
            </li>
          </ul>
          <form action="#" method="get" class="header__search">
            <h2 class="a11y-hidden">검색</h2>
            <fieldset class="flex-default">
              <legend class="a11y-hidden">검색폼</legend>
              <label for="searchForm" class="a11y-hidden">자료검색</label>
              <input
                type="text"
                id="searchForm"
                class="search__form"
                name="search"
                required
              />
              <a href="#" class="search__btn" title="검색">
                <img src="../images/Search.svg" alt="검색버튼" />
              </a>
            </fieldset>
          </form>
        </div>
        <nav class="navigation" id="Navigation">
          <h2 class="a11y-hidden">메인 메뉴</h2>
          <ul class="nav__menu flex-default">
            <li class="nav__list">
              <h3 class="nav__headline">
                <a href="../html/menumain.html">메뉴</a>
              </h3>
              <ul class="nav__items">
                <li><a href="../html/bagel.html">베이글</a></li>
                <li><a href="../html/sandwich.html">샌드위치</a></li>
                <li><a href="../html/soup.html">스프</a></li>
                <li><a href="../html/creamcheese.html">크림치즈</a></li>
                <li><a href="../html/baverage.html">음료</a></li>
              </ul>
            </li>
            <li class="nav__list">
              <h3 class="nav__headline">
                <a href="../html/storemain.html">스토어</a>
              </h3>
              <ul class="nav__items">
                <li><a href="../html/anguk.html">안국점</a></li>
                <li><a href="../html/dosan.html">도산점</a></li>
                <li><a href="../html/jamsil.html">잠실점</a></li>
                <li><a href="../html/jeju.html">제주점</a></li>
                <li><a href="../html/suwon.html">수원점</a></li>
              </ul>
            </li>
            <li class="nav__list">
              <h3 class="nav__headline">
                <a href="../html/catchtable.html">캐치 테이블</a>
              </h3>
              <ul class="nav__items">
                <li>
                  <a
                    href="https://app.catchtable.co.kr/ct/shop/london_bagel_museum_anguk"
                    >안국점</a
                  >
                </li>
                <li>
                  <a
                    href="https://app.catchtable.co.kr/ct/shop/london_bagel_museum_dosan"
                    >도산점</a
                  >
                </li>
                <li>
                  <a
                    href="https://app.catchtable.co.kr/ct/shop/london_bagel_museum_jamsil"
                    >잠실점</a
                  >
                </li>
                <li>
                  <a
                    href="https://app.catchtable.co.kr/ct/shop/london_bagel_museum_jeju"
                    >제주점</a
                  >
                </li>
                <li><a href="../html/csuwon.html">수원점</a></li>
              </ul>
            </li>
            <li class="nav__list">
              <h3 class="nav__headline">
                <a href="../html/review.html">리뷰</a>
              </h3>
            </li>
            <li class="nav__list">
              <h3 class="nav__headline">
                <a href="../html/notice.html">공지</a>
              </h3>
            </li>
          </ul>
        </nav>
      </header>
    </div>
    <!-- 로그인 메인 섹션 -->
    <main class="main-container" id="content">
      <div class="bg">
        <!-- 로그인 입력 서식 영역 -->
        <section class="sign-in" id="SignIn">
          <h2 class="sign-in__headline">sign in</h2>
          <p class="sign-in__intro">환영합니다. 런던 베이글 뮤지엄입니다.</p>
          <form
            action="#"
            method="POST"
            onsubmit="event.preventDefault(); checkLogin();"
          >
            <fieldset>
              <legend class="a11y-hidden">로그인 폼</legend>
              <div class="sign-in__form">
                <!-- 아이디 및 비밀번호 입력창 -->
                <div class="member-id is-invalid is-invalid-input">
                  <label for="userId">아이디</label>
                  <input
                    type="email"
                    id="loginEmail"
                    name="user_id"
                    placeholder="사용자 계정을 입력합니다."
                    required
                  />
                </div>
                <div class="member-pw">
                  <label for="userPw">패스워드</label>
                  <input
                    type="password"
                    id="loginPassword"
                    name="user_pw"
                    placeholder="사용자 계정 비밀번호를 입력합니다."
                    required
                  />
                  <span class="member-pw--error" role="alert"
                    >* 비밀번호는 특수문자 및 숫자 대,소문자 포함 8자리
                    이상입니다.</span
                  >
                </div>
                <!-- 아이디 저장 및 로그인 유지 -->
                <div class="save-and-keep">
                  <div class="save-id">
                    <input type="checkbox" id="userIdSave" />
                    <span class="sign-in__checkbox" aria-hidden="true"></span>
                    <label for="userIdSave">아이디 저장</label>
                  </div>
                  <label for="keepSignIn" class="keep-sign-in">
                    <input type="checkbox" id="keepSignIn" />
                    <span class="sign-in__checkbox"></span>
                    로그인 상태 유지
                  </label>
                  <!-- <div class="keep-sign-in">
                <input type="checkbox" id="keepSignIn" />
                <span class="sign-in__checkbox" aria-hidden="true"></span>
                <label for="keepSignIn">로그인 상태 유지</label>
              </div> -->
                </div>
                <!-- 로그인 인포메이션 -->
                <div class="sign-in__info">
                  <p>
                    타 사이트와 비밀번호를 동일하게 사용할 경우 도용의 위험이
                    있으므로, 사용자 정보 보호를 위해 정기적인 비밀번호 변경을
                    요청 드립니다.
                  </p>
                </div>
                <!-- 로그인 버튼 -->
                <div class="sign-in__request is-invalid">
                  <button type="submit" class="btn-sign-in">로그인</button>
                </div>
              </div>
              <!-- 로그인 외 서비스 -->
              <div class="account-service">
                <ul class="reset-list">
                  <li>
                    <a href="../html/signup.html">회원가입</a
                    ><span class="divider" aria-hidden="true">ㅣ</span>
                  </li>
                  <li>
                    <a href="#">아이디 찾기</a
                    ><span class="divider" aria-hidden="true">ㅣ</span>
                  </li>
                  <li><a href="#">비밀번호 찾기</a></li>
                </ul>
              </div>
            </fieldset>
          </form>
        </section>
      </div>
    </main>
    <div class="footer-container">
      <!-- footer -->
      <footer class="footer">
        <div class="footer__brand-logo">
          <p>London Bagel Museum</p>
        </div>
        <ul class="reset-list footer__site-info">
          <li><a href="#">개인정보 처리방침</a></li>
          <li><a href="#">멤버스 이용약관</a></li>
          <li><a href="#">가맹 안내</a></li>
          <li><a href="#">대량 쿠폰판매</a></li>
          <li><a href="#">채용 안내</a></li>
          <li><a href="#">고객의 소리</a></li>
          <li><a href="#">사이트맵</a></li>
        </ul>
        <address class="footer__address">
          <span>서울 종로구 북촌로4길 20</span>
          <span class="address__divider" aria-hidden="true">ㅣ</span>
          <span>연락처 : 02-1111-2222</span>
          <div>
            <span>사업자 등록번호 : 111-22-33333</span>
            <span class="address__divider" aria-hidden="true">ㅣ</span>
            <span>통신판매업 신고 : 강남 제 000000호</span>
            <span class="address__divider" aria-hidden="true">ㅣ</span>
            <span>대표이사 : 김런던</span>
          </div>
        </address>
        <small class="footer__copyright"
          >&copy; 2024 london bagel museum.all rights reserved.</small
        >
      </footer>
    </div>

    <!-- 상단 이동 -->
    <a href="#" class="gototop" aria-label="상단 이동"></a>
  </body>
</html>
